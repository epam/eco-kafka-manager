<!--
 * Copyright 2020 EPAM Systems
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 -->
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header(links,scripts,styles)">
    <title>Kafka Manager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap-grid.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap-utilities.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap-multiselect/css/bootstrap-multiselect.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/fonts/font-awesome/css/font-awesome.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/index.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/data-tables/dataTables.bootstrap5.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/data-tables/fixedColumns.dataTables.min.css}" />

    <link rel="stylesheet" type="text/css" th:href="@{/styles/css/bootstrap.epam.custom.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/css/copy-text.css}" />

    <th:block th:replace="${links}" />
    
    <script type="text/javascript" th:src="@{/jquery/jquery-3.6.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/moment/moment-2.26.min.js}"></script>
    <script type="text/javascript" th:src="@{/moment/moment-timezone-with-data.min.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.bundle.js}"></script>
    <script type="text/javascript" th:src="@{/jquery-twbsPagination/jquery.twbsPagination.min.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-multiselect/js/bootstrap-multiselect.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.uk.js}"></script>
    <script type="text/javascript" th:src="@{/js/ui_lib.js}"></script>
    <script type="text/javascript" th:src="@{/loading-modal/loading-modal.js}"></script>
    <script type="text/javascript" th:src="@{/js/collapsed-panel.js}"></script>
    <script type="text/javascript" th:src="@{/js/collapsed-panel-chevron.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/jquery.dataTables.min.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/dataTables.bootstrap5.min.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/dataTables.fixedColumns.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/copy-text.js}"></script>
    
    <th:block th:replace="${scripts}" />
    
    <th:block th:if="${gaTrackingId != null}">
    <script async="async" th:src="${'https://www.googletagmanager.com/gtag/js?id=' + gaTrackingId}"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script type="text/javascript" th:inline="javascript">
        /*<![CDATA[*/
        var gaTrackingId = [[${gaTrackingId}]];
        /*]]>*/
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', gaTrackingId);
    </script>
    </th:block>
    
    <th:block th:replace="${styles}" />
</head>
<body>

    <div th:fragment="navbar">

        <div class="header-content">

            <div class="brand">
                <a href="/">kafka manager</a>
            </div>
            
            <div class="menu-wrapper">

                <div class="menu">

                    <button class="transparent-btn">
                        <span class="menu-name">Resources</span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>

                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/topics}">Topics</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/brokers}">Brokers</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/consumer_groups}">Consumer Groups</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/permissions}">Permissions</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/transactions}">Transactions</a>
                        </div>

                    </div>
                </div>

                <div class="menu">

                    <button class="transparent-btn">
                        <span class="menu-name">Metrics</span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>

                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/metrics_state}">Spring Endpoint</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/udmetrics}">User-Defined Metrics</a>
                        </div>
                    </div>

                </div>

                <div class="menu user-menu">

                    <button class="transparent-btn">
                        <span class="menu-name" th:text="${principal != null ? principal.name : 'unknown'}"></span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>
                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/logout}">logout</a>
                        </div>
                    </div>
                    
                </div>

            </div>

        </div>

        <script th:src="@{/components/header/index.js}"></script>
        
    </div>

    <div th:fragment="loading-modal">
        <div id="loadingModal" class="modal" tabindex="-1" data-keyboard="false"
             data-bs-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-sm modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:center; font-size: 1.2em;">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            <div id="loadingModalText">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="info-modal">
        <div id="infoModal" class="modal" tabindex="-1" aria-hidden="true" style="z-index: 2000">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="infoModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:center; font-size: 1.2em;">
                            <div id="infoModalText"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="infoModalCloseButton" class="btn" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="data-modal">
        <div id="dataModal" class="modal" tabindex="-1" aria-hidden="true" style="z-index: 2000">
            <div class="modal-dialog modal-dialog-centered" style="max-width:50vw">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="dataModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:left; font-size: 1.2em;">
                            <pre id="dataModalText"></pre>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="dataModalCopyButton" class="btn btn-success" >Copy</button>
                        <button id="dataModalCloseButton" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="footer" class="footer-content">
        <div class="build-info">
            <span th:text="${buildInfo.buildVersion}"></span>
            <span th:text="${'(' + buildInfo.buildDate + ')'}"></span>
        </div>
    </div>

</body>
</html>
