<!--
 * Copyright 2020 EPAM Systems
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 -->
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header(links,scripts,styles)">
    <title>Kafka Manager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap-grid.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/css/bootstrap-utilities.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap-multiselect/css/bootstrap-multiselect.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/fonts/font-awesome/css/font-awesome.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/index.css}" />

    <link rel="stylesheet" type="text/css" th:href="@{/data-tables/dataTables.bootstrap5.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/data-tables/fixedColumns.dataTables.min.css}" />

    <link rel="stylesheet" type="text/css" th:href="@{/styles/css/bootstrap.epam.custom.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/styles/css/copy-text.css}" />

    <th:block th:replace="${links}" />
    
    <script type="text/javascript" th:src="@{/jquery/jquery-3.6.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/moment/moment.min.js}"></script>
    <script type="text/javascript" th:src="@{/moment/moment-timezone-with-data.min.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.bundle.js}"></script>
    <script type="text/javascript" th:src="@{/jquery-twbsPagination/jquery.twbsPagination.min.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-multiselect/js/bootstrap-multiselect.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.uk.js}"></script>
    <script type="text/javascript" th:src="@{/js/ui_lib.js}"></script>
    <script type="text/javascript" th:src="@{/components/loading-modal/loading-modal.js}"></script>
    <script type="text/javascript" th:src="@{/components/collapsed-panel/collapsed-panel.js}"></script>
    <script type="text/javascript" th:src="@{/components/collapsed-panel/collapsed-panel-chevron.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/jquery.dataTables.min.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/dataTables.bootstrap5.min.js}"></script>
    <script type="text/javascript" th:src="@{/data-tables/dataTables.fixedColumns.min.js}"></script>
    <script type="text/javascript" th:src="@{/components/copy-text/copy-text.js}"></script>
    
    <th:block th:replace="${scripts}" />
    
    <th:block th:if="${gaTrackingId != null}">
    <script async="async" th:src="${'https://www.googletagmanager.com/gtag/js?id=' + gaTrackingId}"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script type="text/javascript" th:inline="javascript">
        /*<![CDATA[*/
        var gaTrackingId = [[${gaTrackingId}]];
        /*]]>*/
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', gaTrackingId);
    </script>
    </th:block>
    
    <th:block th:replace="${styles}" />
</head>
<body>

    <div th:fragment="navbar">

        <div class="header-content">

            <div class="brand">
                <a href="/">kafka manager</a>
            </div>
            
            <div class="menu-wrapper">

                <div class="menu">

                    <button class="transparent-btn">
                        <span class="menu-name">Resources</span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>

                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/topics}">Topics</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/brokers}">Brokers</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/consumer_groups}">Consumer Groups</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/permissions}">Permissions</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/transactions}">Transactions</a>
                        </div>

                    </div>
                </div>

                <div class="menu">

                    <button class="transparent-btn">
                        <span class="menu-name">Metrics</span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>

                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/metrics_state}">Spring Endpoint</a>
                        </div>
                        <div class="menu-item">
                            <a th:href="@{/udmetrics}">User-Defined Metrics</a>
                        </div>
                    </div>

                </div>

                <div class="menu user-menu">

                    <button class="transparent-btn">
                        <span class="menu-name" th:text="${principal != null ? principal : 'unknown'}"></span>
                        <div class="arrow">
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </button>
                    <div class="menu-items fadeIn">
                        <div class="menu-item">
                            <a th:href="@{/logout}">logout</a>
                        </div>
                    </div>
                    
                </div>

            </div>

        </div>

        <script th:src="@{/components/header/index.js}"></script>
        
    </div>

    <div th:fragment="loading-modal">
        <div id="loadingModal" class="modal" tabindex="-1" data-keyboard="false"
             data-bs-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-sm modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:center; font-size: 1.2em;">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            <div id="loadingModalText">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="info-modal">
        <div id="infoModal" class="modal over-all-windows" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="infoModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:center; font-size: 1.2em;">
                            <div id="infoModalText"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="infoModalCloseButton" class="btn" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="data-modal">
        <div id="dataModal" class="modal over-all-windows" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" style="max-width:45vw">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="dataModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div id="dataModalTextContent" style="text-align:left;font-size:1.2em;padding-left:1em"></div>
                    </div>
                    <div class="modal-footer">
                        <button id="dataModalCopyButton" class="btn btn-success" >Copy</button>
                        <button id="dataModalCloseButton" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="faq-modal">
        <div id="faqModal" class="modal over-all-windows" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" style="max-width:60vw">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="faqModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div id="faqModalTextContent" class="faq-content"></div>
                    </div>
                    <div class="modal-footer">
                        <button id="faqModalCloseButton" class="btn btn-primary" data-bs-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="confirm-modal">
        <div id="confirmModal" class="modal over-all-windows" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="confirmModalHeader"></div>
                    </div>
                    <div class="modal-body">
                        <div class="mt-3 mb-3" style="text-align:center; font-size: 1.2em;">
                            <div id="confirmModalText"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="confirmModalOkButton" class="btn" data-bs-dismiss="modal">Ok</button>
                        <button id="confirmModalCloseButton" class="btn" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="query-param-filter">
        <div class="query-param-filter-container">
            <div class="card" style="width: 100vw;">
                <div class="card-body">
                    <div class="row">
                        <div class="col-auto d-flex" style="flex-wrap: wrap">
                            <div class="col-auto">
                                <div class="input-group" style="flex-wrap: nowrap;">
                                    <div id="query-filter-faq-button" class="faq-button query-filter-faq-button"></div>
                                    <span class="input-group-text" id="basic-addon1">Filter:</span>
                                    <select class="form-select w-10" id="query-param-filter-column-select" aria-label="Default select example">
                                    </select>
                                    <select class="form-select" id="query-param-filter-operation-select" aria-label="Default select example"></select>
                                    <input type="text" class="form-control" id="query-param-filter-value" aria-label="Text input with dropdown button">
                                    <select class="form-select display-none" id="query-param-filter-value-select" aria-label="choose value"></select>
                                    <button class="btn btn-success" type="button" id="add-query-param-filter-button">Add</button>
                                </div>
                            </div>
                            <div id="query-param-filter-clause-container" class="filter-clause-container col-auto"></div>
                        </div>
                        <div class="col-auto d-flex" style="max-height: 2.6em;flex:1;justify-content: flex-end;">
                            <button id="query-param-filter-apply-button" class="btn btn-primary">
                                Find <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="browse-filter">
        <div>
            <div><b>Filter</b>&nbsp;<div id="filter-faq-button" class="faq-button"></div></div>
            <div class="row">
                <div class="input-group mb-3">
                    <select class="form-select w-10" id="filter-column-select" aria-label="Default select example">
                    </select>
                    <select class="form-select" id="filter-operation-select" aria-label="Default select example">
                    </select>
                    <input type="text" class="form-control" id="filter-value" aria-label="Text input with dropdown button">
                    <button class="btn btn-success" type="button" id="add-filter-button">Add</button>
                </div>
            </div>
            <div class="row">
                <div id="filter-clause-container" class="filter-clause-container">
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="tombstone-modal">
        <div id="tombstone-modal-dialog"
             class="modal fade"
             role="dialog">

            <div class="modal-dialog tombstone-content-dialog">
                <div class="modal-content" style="max-height:90vh">
                    <div class="modal-header">
                        <h5 class="modal-title">TOMBSTONE GENERATOR</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body tombstone-content-dialog-body">
                        <h5 class="d-inline">Key:</h5>
                        <h5 class="d-inline" id="tombstone-key-display"></h5>
                        <h5 class="pt-2">Headers:</h5>
                        <textarea class="tombstone-text-area" id="tombstone-header-content">
                </textarea>
                        <div class="col-12" id="tombstone-generation-result"></div>
                        <input type="hidden" id="tombstone-key"/>
                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-success"
                           id="tombstone-generate-button">
                            Generate <i th:class="${'fa fa-cogs'}"></i>
                        </a>
                        <button type="button"
                                class="btn btn-primary"
                                th:onclick="closeTombstoneModal()">
                            Exit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:fragment="copy-record-modal">
        <div id="copy-record-modal-dialog"
             class="modal fade"
             role="dialog">
            <div class="modal-dialog tombstone-content-dialog">
                <div class="modal-content" style="max-height:90vh">
                    <div class="modal-header">
                        <h5 class="modal-title">REPUBLISH RECORD WITH KEY: </h5>&nbsp;<h5 class="d-inline modal-title text-primary" id="copy-record-key-display"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body tombstone-content-dialog-body">
                        <h5>Headers:</h5>
                        <textarea class="tombstone-text-area" id="copy-record-header-content"></textarea>
                        <div class="col-12" id="copy-record-result"></div>
                        <input type="hidden" id="copy-record-key"/>
                        <input type="hidden" id="copy-record-id"/>
                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-success"
                           id="copy-record-button">
                            Copy <i th:class="${'fa fa-cogs'}"></i>
                        </a>
                        <button type="button"
                                class="btn btn-primary"
                                th:onclick="closeCopyRecordModal()">
                            Exit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:fragment="footer" class="footer-content">
        <div class="build-info">
            <span th:text="${buildInfo.buildVersion}"></span>
            <span th:text="${'(' + buildInfo.buildDate + ')'}"></span>
        </div>
    </div>

</body>
</html>
